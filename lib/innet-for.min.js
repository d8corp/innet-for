var innetFor=function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=r(t);function o(e,t){return"function"==typeof e?e(t):void 0===e?t:t[e]}return function(r,u,c,f){var i,l,v,d=e.__read(r.children),h=d[0],s=d.slice(1),m=r.props,y=m.size,p=void 0===y?1/0:y,w=m.key,b=m.of;if("function"==typeof b||"function"==typeof p){var x,k="function"==typeof p?new n.Cache(p):{value:p},_=document.createComment("for");t.append(u,_),null===(v=n.Watch.activeWatcher)||void 0===v||v.onDestroy((function(){g.forEach((function(e){return e.watcher.destroy()})),null==x||x.destroy(),t.remove(_)}));var g=new Map,W=[];new n.Watch((function(r){var u,i,l,v,d="function"==typeof b?b(r):b;if(r){var m=W,y=g;g=new Map,W=[];var p=0,C=function(e){if(k.value<=p)return"break";x&&(x.destroy(),x=void 0,t.clear(_));var r=o(w,e);if(g.has(r))return"continue";if(r===m[p])g.set(r,y.get(r)),y.delete(r);else if(y.has(e)){var u=y.get(e);y.delete(r),u.index.value=p,g.set(r,u),p?t.after(g.get(W[p-1]).comment,u.comment):t.prepend(_,u.comment)}else{var i=document.createComment(""),l=new n.State(p);p?t.after(g.get(W[p-1]).comment,i):t.prepend(_,i);var v=new n.Watch((function(n){n&&t.clear(i),a.default(h(e,(function(){return l.value})),i,c,f)}),!0);g.set(r,{comment:i,value:e,index:l,watcher:v})}W.push(r),p++};try{for(var S=e.__values(d),E=S.next();!E.done;E=S.next()){if("break"===C(E.value))break}}catch(e){u={error:e}}finally{try{E&&!E.done&&(i=S.return)&&i.call(S)}finally{if(u)throw u.error}}y.forEach((function(e){var n=e.comment;e.watcher.destroy(),t.remove(n)})),!p&&s.length&&(x=new n.Watch((function(){return a.default(s,_,c,f)}),!0))}else{p=0;var M=function(e){if(k.value<=p)return"break";var r=o(w,e);if(g.has(r))return"continue";var u=document.createComment(""),i=new n.State(p++);W.push(r),t.append(_,u);var l=new n.Watch((function(n){n&&t.clear(u),a.default(h(e,(function(){return i.value})),u,c,f)}),!0);g.set(o(w,e),{comment:u,value:e,index:i,watcher:l})};try{for(var j=e.__values(d),z=j.next();!z.done;z=j.next()){if("break"===M(z.value))break}}catch(e){l={error:e}}finally{try{z&&!z.done&&(v=j.return)&&v.call(j)}finally{if(l)throw l.error}}!p&&s.length&&(x=new n.Watch((function(){return a.default(s,_,c,f)}),!0))}}))}else{var C=[],S=0;try{for(var E=e.__values(b),M=E.next();!M.done;M=E.next()){var j=M.value;if(p<=S)break;C.push(h(j,S++))}}catch(e){i={error:e}}finally{try{M&&!M.done&&(l=E.return)&&l.call(E)}finally{if(i)throw i.error}}S?a.default(C,u,c,t.dom):s.length&&a.default(s,u,c,t.dom)}}}(tslib,innet,watchState);
